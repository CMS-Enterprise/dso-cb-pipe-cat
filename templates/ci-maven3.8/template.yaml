version: 1
type: pipeline-template
templateType: MULTIBRANCH
name: maven 3.8 Pipeline Job
description: Simple JAVA(Ver 11/17) APP with Maven
parameters:
  - name: emailRecipient
    type: string
    displayName: Email address to be used for sending build notifications
  - name: github_repo
    type: string
    displayName: GitHub HTTPS repo endpoint
  - name: artifact_name
    type: string
    displayName: Name of your artifact in Artifactory
  - name: artifactory_project_name
    type: string
    displayName: Name of your project in Artifactory
  - name: ado_iam_role
    type: string
    displayName: ARN of IAM role to be assumed in ADO owned AWS account
  - name: java_version
    type: string
    displayName: Java Version
  - name: build_args
    type: string
    displayName: Maven Compile arguments
    defaultValue: clean compile
  - name: test_args
    type: string
    displayName: Maven Test arguments
    defaultValue: clean test
  - name: package_args
    type: string
    displayName: Maven Package arguments
    defaultValue: clean package
  - name: gh_org
    type: string
    displayName: Name of your Github Org
  - name: sq_project_key
    type: string
    displayName: Sonarqube project key
  - name: org_id
    type: string
    displayName: Snyk org id
  - name: docker_args
    type: string
    displayName: Docker arguments
  - name: artifactory_path
    type: string
    displayName: Path to Artifact in Jfrog Artifactory or ECR 
  - name: work_directory
    type: string
    displayName: Name of the working directory
  - name: docker_file
    type: string
    displayName: Name of the Docker file
  - name: selenium_test_url
    type: string
    displayName: Test URL for Selenium Testing
  - name: selenium_browser
    type: string
    displayName: Browser(s) for Selenium testing
  - name: selenium_video
    type: boolean
    displayName: Record a video of Selenium Testing
  - name: selenium_creds_id
    type: credentials
    displayName: Cloudbees Credentials ID for Selenium access
  - name: selenium_maven_config_file
    type: string
    displayName: Maven config file path
  - name: selenium_test_args
    type: string
    displayName: Selenium Test arguments
    defaultValue: clean test

   
multibranch:
  branchSource:
    # git:
      # remote: ${github_repo}
    github:
      repoOwner: ${gh_org}
      repository: ${github_repo}
      credentialsId: "git_token"
  orphanedItemStrategy:
    daysToKeep: 3